<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debt Tracker</title>
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"  integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
</head>
<body class="d-flex flex-column">
    <header class="navbar navbar-expand-lg bg-light" style="border-top: 1em solid blue;">
        <section class="logo"><a class="nav-link" href="/dashboard"><span>&#128507;</span><span class="under">&#9889;</span></a></section>
        <nav>
            <ul class="nav justify-content-end">
                <li class="nav-item"><a class="nav-link" href="/debtors">Debts</a></li>
                <li class="nav-item"><a class="nav-link" href="/registerpayment">Register Payment</a></li>
                

                <li class="nav-item dropdown">
            <% if (typeof user !== 'undefined'){ %>
                <% if (user.accountType === "Owner"){ %> 
                    <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false"><%= user.name %> ✒</a>
                    <ul class="dropdown-menu dropdown-menu-end">
                <% }else if(user.accountType === "App Manager"){ %>
                    <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false"><%= user.name %> ✒</a>
                    <ul class="dropdown-menu dropdown-menu-end">
                <% }else{ %>
                    <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false"><%= user.name %></a>
                    <ul class="dropdown-menu dropdown-menu-end">
                <% } %>
                        <li><a class="dropdown-item" href="/registerdebt">Register Debt</a></li>
                    <% if (typeof user !== 'undefined' && (user.accountType === "Owner" || user.accountType === "App Manager")){ %> 
                        <li><a class="dropdown-item" href="/auth/user">User Administration</a></li>
                    <% } %>
                        <li><a class="dropdown-item" href="/auth/logout">Logout</a>
            <% }else{ %>
                        <li><a class="dropdown-item" href="/auth/login">Login</a></li>
            <% } %>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <% if (typeof messages !== 'undefined'){ %> 
        <% messages.forEach( (msg)=> { %>
            <div class="alert alert-success" role="alert">
                <p><%= msg %></p>
            </div>
        <% }) %>
    <% } %>
    <% if (typeof errors !== 'undefined'){ %> 
        <% errors.forEach( (msg)=> { %>
            <div class="alert alert-danger" role="alert">
                <p><%= msg %></p>
            </div>
        <% }) %>
    <% } %>